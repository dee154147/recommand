# ç¬¬ä¸‰é˜¶æ®µè¯¦ç»†è®¾è®¡æ–‡æ¡£

## ç³»ç»Ÿæ¶æ„è®¾è®¡

### 1. æ•´ä½“æ¶æ„
ç¬¬ä¸‰é˜¶æ®µé‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œå‰ç«¯ä½¿ç”¨Vue.jsæ¡†æ¶ï¼Œåç«¯æä¾›RESTful APIæ¥å£ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å‰ç«¯åº”ç”¨      â”‚    â”‚   APIç½‘å…³       â”‚    â”‚   åç«¯æœåŠ¡      â”‚
â”‚   (Vue.js)      â”‚â—„â”€â”€â–ºâ”‚   (Flask)       â”‚â—„â”€â”€â–ºâ”‚   (Python)      â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ - ç”¨æˆ·äº¤äº’é¡µé¢  â”‚    â”‚ - è·¯ç”±ç®¡ç†      â”‚    â”‚ - æ¨èç®—æ³•      â”‚
â”‚ - å•†å“æœç´¢      â”‚    â”‚ - è®¤è¯æˆæƒ      â”‚    â”‚ - æ•°æ®å­˜å‚¨      â”‚
â”‚ - ä¸ªæ€§åŒ–æ¨è    â”‚    â”‚ - è¯·æ±‚å¤„ç†      â”‚    â”‚ - ç”¨æˆ·ç®¡ç†      â”‚
â”‚ - äº¤äº’å†å²      â”‚    â”‚ - å“åº”æ ¼å¼åŒ–    â”‚    â”‚ - å•†å“ç®¡ç†      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. å‰ç«¯æ¶æ„
åŸºäºVue 3 Composition APIçš„å•é¡µåº”ç”¨æ¶æ„ï¼š

```
src/
â”œâ”€â”€ components/          # å¯å¤ç”¨ç»„ä»¶
â”œâ”€â”€ views/              # é¡µé¢ç»„ä»¶
â”‚   â””â”€â”€ UserInteraction.vue
â”œâ”€â”€ router/             # è·¯ç”±é…ç½®
â”œâ”€â”€ utils/              # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ api.js          # APIæ¥å£å°è£…
â”œâ”€â”€ assets/             # é™æ€èµ„æº
â””â”€â”€ main.js             # åº”ç”¨å…¥å£
```

## æ ¸å¿ƒæ¨¡å—è®¾è®¡

### 1. ç”¨æˆ·ç®¡ç†æ¨¡å—

#### 1.1 ç”¨æˆ·çŠ¶æ€ç®¡ç†
```javascript
// ç”¨æˆ·çŠ¶æ€ç®¡ç†
const currentUser = ref(null)
const userInteractions = ref([])

// ç”¨æˆ·åˆå§‹åŒ–
const initializeUser = () => {
  const userId = localStorage.getItem('currentUserId')
  if (!userId) {
    ElMessage.warning('è¯·å…ˆç™»å½•')
    return
  }
  
  currentUser.value = {
    id: userId,
    name: userId
  }
  
  loadUserInteractions()
}
```

#### 1.2 ç”¨æˆ·ç»Ÿè®¡è®¡ç®—
```javascript
// è®¡ç®—ç”¨æˆ·æ€»è¯„åˆ†
const totalScore = computed(() => {
  return userInteractions.value.reduce((sum, interaction) => sum + interaction.score, 0)
})

// è®¡ç®—å•†å“è¯„åˆ†ç»Ÿè®¡
const sortedProductScores = computed(() => {
  const productScores = {}
  
  userInteractions.value.forEach(interaction => {
    const productId = interaction.productId
    if (!productScores[productId]) {
      productScores[productId] = {
        productId: productId,
        productName: interaction.productName,
        productCategory: getProductCategory(interaction.productName),
        totalScore: 0,
        lastInteraction: interaction.timestamp
      }
    }
    
    productScores[productId].totalScore += interaction.score
    
    if (new Date(interaction.timestamp) > new Date(productScores[productId].lastInteraction)) {
      productScores[productId].lastInteraction = interaction.timestamp
    }
  })
  
  return Object.values(productScores).sort((a, b) => b.totalScore - a.totalScore)
})
```

### 2. å•†å“æœç´¢æ¨¡å—

#### 2.1 æœç´¢åŠŸèƒ½è®¾è®¡
```javascript
// è¯­ä¹‰æœç´¢
const performSemanticSearch = async () => {
  if (!searchQuery.value.trim()) {
    ElMessage.warning('è¯·è¾“å…¥æœç´¢å…³é”®è¯')
    return
  }
  
  loading.value = true
  try {
    const response = await productAPI.searchProducts(searchQuery.value, { type: 'semantic' })
    currentProducts.value = response.data || []
    
    if (currentProducts.value.length === 0) {
      ElMessage.info('æœªæ‰¾åˆ°ç›¸å…³å•†å“')
    } else {
      ElMessage.success(`æ‰¾åˆ° ${currentProducts.value.length} ä¸ªç›¸å…³å•†å“`)
    }
  } catch (error) {
    console.error('æœç´¢å¤±è´¥:', error)
    currentProducts.value = getMockSearchResults()
    ElMessage.success(`æ‰¾åˆ° ${currentProducts.value.length} ä¸ªç›¸å…³å•†å“`)
  } finally {
    loading.value = false
  }
}

// æ¨¡ç³ŠåŒ¹é…æœç´¢
const performFuzzySearch = async () => {
  // ç±»ä¼¼è¯­ä¹‰æœç´¢ï¼Œä½†ä½¿ç”¨æ¨¡ç³ŠåŒ¹é…å‚æ•°
  const response = await productAPI.searchProducts(searchQuery.value, { type: 'fuzzy' })
  // ... å¤„ç†é€»è¾‘
}
```

#### 2.2 æœç´¢ç•Œé¢è®¾è®¡
```vue
<template>
  <section class="search-section">
    <div class="search-container">
      <div class="search-bar">
        <input 
          type="text" 
          class="search-input" 
          placeholder="è¯·è¾“å…¥å•†å“å…³é”®è¯ï¼Œå¦‚ï¼šæ™ºèƒ½æ‰‹æœºã€è¿åŠ¨é‹ã€ç¬”è®°æœ¬ç”µè„‘..."
          v-model="searchQuery"
          @keypress.enter="performSemanticSearch"
        >
      </div>
      <div class="search-buttons">
        <button class="search-btn" @click="performSemanticSearch" :disabled="loading">
          ğŸ” è¯­ä¹‰æ£€ç´¢
        </button>
        <button class="search-btn secondary" @click="performFuzzySearch" :disabled="loading">
          ğŸ“ æ¨¡ç³ŠåŒ¹é…
        </button>
      </div>
    </div>
  </section>
</template>
```

### 3. å•†å“äº¤äº’æ¨¡å—

#### 3.1 äº¤äº’ç±»å‹å®šä¹‰
```javascript
// äº¤äº’ç±»å‹å’Œè¯„åˆ†è§„åˆ™
const INTERACTION_TYPES = {
  CLICK: { type: 'click', score: 1, label: 'ç‚¹å‡»' },
  VIEW: { type: 'view', score: 2, label: 'æŸ¥çœ‹' },
  FAVORITE: { type: 'favorite', score: 3, label: 'æ”¶è—' },
  PURCHASE: { type: 'purchase', score: 5, label: 'è´­ä¹°' },
  DISLIKE: { type: 'dislike', score: -2, label: 'ä¸æ¨è' }
}
```

#### 3.2 äº¤äº’è®°å½•åŠŸèƒ½
```javascript
// è®°å½•ç”¨æˆ·äº¤äº’
const recordInteraction = async (productId, interactionType, score) => {
  const product = currentProducts.value.find(p => p.id === productId) || 
                 currentRecommendations.value.find(p => p.id === productId)
  
  if (!product) {
    ElMessage.error('å•†å“ä¸å­˜åœ¨')
    return
  }

  const interaction = {
    productId: productId,
    productName: product.name,
    interactionType: interactionType,
    score: score,
    timestamp: new Date()
  }

  try {
    // è°ƒç”¨APIè®°å½•äº¤äº’
    await userAPI.recordUserInteraction(interaction)
    
    // æ·»åŠ åˆ°æœ¬åœ°äº¤äº’å†å²
    userInteractions.value.push(interaction)
    
    // æ˜¾ç¤ºåé¦ˆ
    showInteractionFeedback(interaction)
    
    // æ›´æ–°æ¨è
    setTimeout(() => {
      updateRecommendations()
    }, 1000)
    
  } catch (error) {
    console.error('è®°å½•äº¤äº’å¤±è´¥:', error)
    // å³ä½¿APIå¤±è´¥ï¼Œä¹Ÿæ·»åŠ åˆ°æœ¬åœ°å†å²
    userInteractions.value.push(interaction)
    showInteractionFeedback(interaction)
  }
}
```

#### 3.3 äº¤äº’åé¦ˆç³»ç»Ÿ
```javascript
// æ˜¾ç¤ºäº¤äº’åé¦ˆ
const showInteractionFeedback = (interaction) => {
  const feedbackMessages = {
    'click': 'ğŸ‘† å·²è®°å½•ç‚¹å‡»è¡Œä¸º',
    'view': 'ğŸ‘ å·²è®°å½•æŸ¥çœ‹è¡Œä¸º',
    'favorite': 'â¤ å·²æ·»åŠ åˆ°æ”¶è—',
    'purchase': 'ğŸ›’ å·²è®°å½•è´­ä¹°è¡Œä¸º',
    'dislike': 'ğŸ‘ å·²è®°å½•ä¸æ¨è'
  }

  const message = feedbackMessages[interaction.interactionType] || 'âœ… äº¤äº’å·²è®°å½•'
  ElMessage.success(message)
}
```

### 4. ä¸ªæ€§åŒ–æ¨èæ¨¡å—

#### 4.1 æ¨èç®—æ³•é›†æˆ
```javascript
// æ›´æ–°æ¨è
const updateRecommendations = async () => {
  try {
    const response = await recommendationAPI.getUserRecommendations(currentUser.value.id)
    currentRecommendations.value = response.data || []
  } catch (error) {
    console.error('è·å–æ¨èå¤±è´¥:', error)
    // ä½¿ç”¨æ¨¡æ‹Ÿæ¨èæ•°æ®
    currentRecommendations.value = getMockRecommendations()
  }
}

// åˆ·æ–°æ¨è
const refreshRecommendations = async () => {
  loadingRecommendations.value = true
  try {
    await updateRecommendations()
    ElMessage.success('æ¨èå·²åˆ·æ–°')
  } catch (error) {
    ElMessage.error('åˆ·æ–°æ¨èå¤±è´¥')
  } finally {
    loadingRecommendations.value = false
  }
}
```

#### 4.2 æ¨èå±•ç¤ºè®¾è®¡
```vue
<template>
  <section class="recommendations-section" v-if="currentRecommendations.length > 0">
    <div class="recommendations-header">
      <h2 class="recommendations-title">ğŸ¯ ä¸ªæ€§åŒ–æ¨è</h2>
      <button class="refresh-btn" @click="refreshRecommendations" :disabled="loadingRecommendations">
        ğŸ”„ {{ loadingRecommendations ? 'åˆ·æ–°ä¸­...' : 'åˆ·æ–°æ¨è' }}
      </button>
    </div>
    <div class="products-grid">
      <!-- æ¨èå•†å“å±•ç¤º -->
    </div>
  </section>
</template>
```

### 5. äº¤äº’å†å²æ¨¡å—

#### 5.1 å†å²å¼¹çª—è®¾è®¡
```javascript
// æ˜¾ç¤ºäº¤äº’å†å²
const showInteractionHistory = () => {
  showHistoryModal.value = true
}

// å…³é—­äº¤äº’å†å²å¼¹çª—
const closeHistoryModal = () => {
  showHistoryModal.value = false
}

// è¯„åˆ†æ ·å¼ç±»
const getScoreClass = (score) => {
  if (score >= 10) return 'score-excellent'
  if (score >= 5) return 'score-good'
  if (score >= 0) return 'score-neutral'
  return 'score-poor'
}

// è¯„åˆ†æ ‡ç­¾
const getScoreLabel = (score) => {
  if (score >= 10) return 'éå¸¸å–œæ¬¢'
  if (score >= 5) return 'å–œæ¬¢'
  if (score >= 0) return 'ä¸€èˆ¬'
  return 'ä¸å–œæ¬¢'
}
```

#### 5.2 å†å²å±•ç¤ºç•Œé¢
```vue
<template>
  <div class="history-modal" :class="{ show: showHistoryModal }" @click="closeHistoryModal">
    <div class="history-modal-content" @click.stop>
      <div class="history-modal-header">
        <h2 class="history-modal-title">ğŸ“‹ äº¤äº’å†å²</h2>
        <button class="history-modal-close" @click="closeHistoryModal">&times;</button>
      </div>
      
      <div class="history-content">
        <div v-if="userInteractions.length === 0" class="history-empty">
          <div class="history-empty-icon">ğŸ“‹</div>
          <div class="history-empty-text">æš‚æ— äº¤äº’å†å²</div>
          <div class="history-empty-description">å¼€å§‹ä¸å•†å“äº¤äº’ï¼Œæ‚¨çš„è¡Œä¸ºå°†è®°å½•åœ¨è¿™é‡Œ</div>
        </div>
        <div v-else>
          <div
            v-for="product in sortedProductScores"
            :key="product.productId"
            class="history-item"
          >
            <div class="history-product-info">
              <div class="history-product-name">{{ product.productName }}</div>
              <div class="history-product-category">{{ product.productCategory }}</div>
            </div>
            <div class="history-score-section">
              <div class="history-total-score" :class="getScoreClass(product.totalScore)">
                {{ product.totalScore > 0 ? '+' + product.totalScore : product.totalScore }}
              </div>
              <div class="score-label">{{ getScoreLabel(product.totalScore) }}</div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="history-modal-footer">
        <button class="history-modal-btn" @click="closeHistoryModal">å…³é—­</button>
      </div>
    </div>
  </div>
</template>
```

## APIæ¥å£è®¾è®¡

### 1. å•†å“æœç´¢API
```javascript
// å•†å“æœç´¢æ¥å£
export const productAPI = {
  // æœç´¢å•†å“
  searchProducts(query, params = {}) {
    return api.get('/search', { params: { q: query, ...params } })
  },
  
  // è·å–å•†å“è¯¦æƒ…
  getProduct(id) {
    return api.get(`/products/${id}`)
  },
  
  // è·å–å•†å“åˆ†ç±»
  getCategories() {
    return api.get('/categories')
  }
}
```

### 2. ç”¨æˆ·äº¤äº’API
```javascript
// ç”¨æˆ·äº¤äº’æ¥å£
export const userAPI = {
  // è®°å½•ç”¨æˆ·è¡Œä¸º
  recordUserInteraction(interaction) {
    return api.post('/user-interactions', interaction)
  },
  
  // è·å–ç”¨æˆ·ä¿¡æ¯
  getUser(id) {
    return api.get(`/users/${id}`)
  },
  
  // æ›´æ–°ç”¨æˆ·åå¥½
  updateUserPreferences(userId, preferences) {
    return api.put(`/users/${userId}/preferences`, preferences)
  }
}
```

### 3. æ¨èç®—æ³•API
```javascript
// æ¨èç®—æ³•æ¥å£
export const recommendationAPI = {
  // è·å–ç”¨æˆ·æ¨è
  getUserRecommendations(userId, limit = 10) {
    return api.get('/recommendations', { 
      params: { user_id: userId, limit } 
    })
  },
  
  // è·å–ç›¸ä¼¼å•†å“
  getSimilarProducts(productId, limit = 10) {
    return api.get('/recommendations', { 
      params: { product_id: productId, limit } 
    })
  }
}
```

## æ ·å¼è®¾è®¡è§„èŒƒ

### 1. é¢œè‰²è§„èŒƒ
```scss
// ä¸»è‰²è°ƒ
$primary-color: #00ffff;
$secondary-color: #ff00ff;
$accent-color: #9C27B0;

// èƒŒæ™¯è‰²
$bg-primary: #0a0a0a;
$bg-secondary: rgba(255, 255, 255, 0.05);
$bg-modal: rgba(10, 10, 10, 0.95);

// æ–‡å­—è‰²
$text-primary: #ffffff;
$text-secondary: rgba(255, 255, 255, 0.7);
$text-muted: rgba(255, 255, 255, 0.5);

// è¾¹æ¡†è‰²
$border-primary: rgba(0, 255, 255, 0.2);
$border-secondary: rgba(0, 255, 255, 0.1);
```

### 2. æ¸å˜æ•ˆæœ
```scss
// æŒ‰é’®æ¸å˜
.btn-primary {
  background: linear-gradient(45deg, #00ffff, #ff00ff);
}

.btn-secondary {
  background: linear-gradient(45deg, #ff6b6b, #ffa500);
}

.btn-accent {
  background: linear-gradient(45deg, #9C27B0, #E91E63);
}

// èƒŒæ™¯æ¸å˜
.bg-animation {
  background: 
    radial-gradient(circle at 20% 50%, rgba(0, 255, 255, 0.1) 0%, transparent 50%),
    radial-gradient(circle at 80% 20%, rgba(255, 0, 255, 0.1) 0%, transparent 50%),
    radial-gradient(circle at 40% 80%, rgba(0, 255, 0, 0.1) 0%, transparent 50%);
}
```

### 3. åŠ¨ç”»æ•ˆæœ
```scss
// èƒŒæ™¯åŠ¨ç”»
@keyframes backgroundMove {
  0%, 100% { transform: translateX(0) translateY(0); }
  25% { transform: translateX(-2%) translateY(-2%); }
  50% { transform: translateX(2%) translateY(-1%); }
  75% { transform: translateX(-1%) translateY(2%); }
}

// æ‚¬åœæ•ˆæœ
.product-card:hover {
  transform: translateY(-5px);
  border-color: #00ffff;
  box-shadow: 0 15px 30px rgba(0, 255, 255, 0.2);
}

// æŒ‰é’®æ•ˆæœ
.btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 10px 25px rgba(0, 255, 255, 0.4);
}
```

## å“åº”å¼è®¾è®¡

### 1. æ–­ç‚¹è®¾ç½®
```scss
// å“åº”å¼æ–­ç‚¹
$breakpoints: (
  mobile: 480px,
  tablet: 768px,
  desktop: 1024px,
  large: 1200px
);

// åª’ä½“æŸ¥è¯¢æ··å…¥
@mixin mobile {
  @media (max-width: 480px) { @content; }
}

@mixin tablet {
  @media (max-width: 768px) { @content; }
}

@mixin desktop {
  @media (min-width: 1024px) { @content; }
}
```

### 2. å¸ƒå±€é€‚é…
```scss
// å•†å“ç½‘æ ¼å“åº”å¼
.products-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 1.5rem;
  
  @include tablet {
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 1rem;
  }
  
  @include mobile {
    grid-template-columns: 1fr;
  }
}

// äº¤äº’æŒ‰é’®å“åº”å¼
.interaction-buttons {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 0.5rem;
  
  @include tablet {
    grid-template-columns: repeat(2, 1fr);
  }
  
  @include mobile {
    grid-template-columns: 1fr;
  }
}
```

## é”™è¯¯å¤„ç†æœºåˆ¶

### 1. APIé”™è¯¯å¤„ç†
```javascript
// APIæ‹¦æˆªå™¨
api.interceptors.response.use(
  response => {
    const { data } = response
    
    if (data.status === 'success') {
      return data
    } else {
      ElMessage.error(data.message || 'è¯·æ±‚å¤±è´¥')
      return Promise.reject(new Error(data.message || 'è¯·æ±‚å¤±è´¥'))
    }
  },
  error => {
    const message = error.response?.data?.message || error.message || 'ç½‘ç»œé”™è¯¯'
    ElMessage.error(message)
    return Promise.reject(error)
  }
)
```

### 2. ç»„ä»¶é”™è¯¯å¤„ç†
```javascript
// é”™è¯¯è¾¹ç•Œå¤„ç†
const handleError = (error, context) => {
  console.error(`Error in ${context}:`, error)
  ElMessage.error('æ“ä½œå¤±è´¥ï¼Œè¯·é‡è¯•')
}

// å¼‚æ­¥æ“ä½œé”™è¯¯å¤„ç†
const safeAsyncOperation = async (operation, errorMessage) => {
  try {
    return await operation()
  } catch (error) {
    console.error(errorMessage, error)
    ElMessage.error(errorMessage)
    return null
  }
}
```

## æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

### 1. ç»„ä»¶ä¼˜åŒ–
- ä½¿ç”¨Vue 3 Composition API
- åˆç†ä½¿ç”¨computedå’Œwatch
- é¿å…ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“

### 2. æ•°æ®ä¼˜åŒ–
- ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ä½œä¸ºå›é€€
- å®ç°æ•°æ®ç¼“å­˜æœºåˆ¶
- ä¼˜åŒ–APIè¯·æ±‚é¢‘ç‡

### 3. æ ·å¼ä¼˜åŒ–
- ä½¿ç”¨CSSå˜é‡
- ä¼˜åŒ–åŠ¨ç”»æ€§èƒ½
- å‡å°‘é‡ç»˜å’Œå›æµ

## æµ‹è¯•ç­–ç•¥

### 1. å•å…ƒæµ‹è¯•
- ç»„ä»¶åŠŸèƒ½æµ‹è¯•
- å·¥å…·å‡½æ•°æµ‹è¯•
- APIæ¥å£æµ‹è¯•

### 2. é›†æˆæµ‹è¯•
- ç”¨æˆ·äº¤äº’æµç¨‹æµ‹è¯•
- æ¨èåŠŸèƒ½æµ‹è¯•
- å†å²è®°å½•æµ‹è¯•

### 3. ç«¯åˆ°ç«¯æµ‹è¯•
- å®Œæ•´ç”¨æˆ·æµç¨‹æµ‹è¯•
- å¤šç«¯å…¼å®¹æ€§æµ‹è¯•
- æ€§èƒ½æµ‹è¯•
