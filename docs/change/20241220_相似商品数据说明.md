# 相似商品数据说明

## 完成时间
2024年12月20日

## 问题描述
用户询问相似商品的数据是否是模拟数据，确认当前显示的是模拟数据。

## 当前状态分析

### 1. 数据显示情况
从用户提供的截图可以看到：
- **参考商品**: "李宁 女式羽毛球鞋 专业比赛鞋 AYAF 006 - 1"
- **相似商品**: "相关商品1"、"相关商品2"、"相关商品3"、"相关商品4"
- **价格**: ¥999、¥1299、¥799、¥1599
- **相似度**: 85.0%、82.0%、78.0%、75.0%

### 2. 数据来源确认
**是的，当前显示的是模拟数据！**

#### **原因分析**:
1. **后端服务未运行**: 端口5002没有服务在监听
2. **API调用失败**: 前端尝试调用 `http://localhost:5002/api/v1/similar-products/${productId}` 失败
3. **错误处理机制**: 当API调用失败时，代码会显示模拟数据作为备用

#### **代码逻辑**:
```javascript
const loadSimilarProducts = async (productId) => {
  loadingSimilar.value = true
  similarProducts.value = []
  
  try {
    // 尝试调用真实API
    const response = await axios.get(`http://localhost:5002/api/v1/similar-products/${productId}?limit=12&threshold=0.0`)
    
    if (response.data.success) {
      similarProducts.value = response.data.data.similar_products
    } else {
      console.error('获取相似商品失败:', response.data.error)
    }
  } catch (error) {
    console.error('API调用失败:', error)
    // 显示模拟数据作为备用
    similarProducts.value = generateMockSimilarProducts()
  } finally {
    loadingSimilar.value = false
  }
}

const generateMockSimilarProducts = () => {
  return [
    { product_id: 1, name: '相关商品 1', price: 999, similarity: 0.85 },
    { product_id: 2, name: '相关商品 2', price: 1299, similarity: 0.82 },
    { product_id: 3, name: '相关商品 3', price: 799, similarity: 0.78 },
    { product_id: 4, name: '相关商品 4', price: 1599, similarity: 0.75 },
    { product_id: 5, name: '相关商品 5', price: 899, similarity: 0.72 },
    { product_id: 6, name: '相关商品 6', price: 1999, similarity: 0.70 }
  ]
}
```

## 解决方案

### 1. 启动后端服务
```bash
cd /Users/liuzhichao/cursorProjects/recommand2/backend
python3 run.py
```

### 2. 验证服务状态
```bash
# 检查后端服务是否运行
lsof -i :5002

# 检查前端服务是否运行
lsof -i :3000
```

### 3. 测试API接口
```bash
# 测试相似商品API
curl "http://localhost:5002/api/v1/similar-products/390573?limit=5&threshold=0.0"
```

## 真实数据 vs 模拟数据

### **模拟数据特点**:
- **商品名称**: "相关商品1"、"相关商品2"等通用名称
- **价格**: 固定的价格值 (999、1299、799等)
- **相似度**: 固定的相似度值 (0.85、0.82、0.78等)
- **商品ID**: 简单的数字ID (1、2、3、4等)

### **真实数据特点**:
- **商品名称**: 真实的商品名称，如"李宁 女式羽毛球鞋 专业比赛鞋 AYAF 006 - 1"
- **价格**: 真实的商品价格
- **相似度**: 基于向量相似度计算的真实相似度值
- **商品ID**: 数据库中的真实商品ID

## 功能验证

### 1. 前端功能正常
- ✅ **按钮显示**: 相似商品按钮正常显示
- ✅ **弹窗打开**: 点击按钮能正常打开弹窗
- ✅ **界面美观**: 弹窗界面设计美观
- ✅ **交互流畅**: 关闭、刷新等功能正常

### 2. 后端功能待验证
- ❌ **API服务**: 后端服务未启动
- ❌ **数据获取**: 无法获取真实相似商品数据
- ❌ **向量计算**: 无法进行真实的相似度计算

## 下一步操作

### 1. 启动后端服务
用户需要启动后端服务以获取真实数据：
```bash
cd /Users/liuzhichao/cursorProjects/recommand2/backend
python3 run.py
```

### 2. 测试真实数据
启动后端服务后，再次点击相似商品按钮，应该能看到：
- **真实商品名称**: 来自数据库的真实商品
- **真实价格**: 商品的实际价格
- **真实相似度**: 基于向量计算的相似度

### 3. 数据对比
启动后端服务后，可以对比：
- **模拟数据**: "相关商品1"、"相关商品2"等
- **真实数据**: 具体的商品名称和详细信息

## 总结

**是的，当前显示的相似商品数据是模拟数据！**

这是因为后端服务没有运行，前端在API调用失败时显示了备用的模拟数据。这是一个很好的错误处理机制，确保即使后端服务不可用，用户也能看到相似商品功能的界面效果。

要获取真实的相似商品数据，需要启动后端服务。一旦后端服务运行，用户就能看到基于真实商品向量计算的相似商品推荐了！🎯
