# 用户交互页面推荐功能优化

## 修改时间
2025-09-17 22:58:00

## 问题描述
用户反馈两个问题：
1. 进入页面时没有自动刷新推荐数据
2. 没有搜索历史时点击推荐按钮应该也能查询推荐商品列表

## 解决方案

### 1. 页面加载时自动更新推荐数据
修改 `loadUserInteractions` 函数，在加载用户交互历史后自动调用 `updateRecommendations()`：

```javascript
const loadUserInteractions = async () => {
  // ... 加载交互历史的代码 ...
  
  // 加载交互历史后自动更新推荐数据
  await updateRecommendations()
}
```

### 2. 推荐按钮智能更新
修改 `scrollToRecommendations` 函数，让推荐按钮总是先尝试更新推荐数据：

```javascript
const scrollToRecommendations = async () => {
  // 先尝试更新推荐数据
  await updateRecommendations()
  
  // 等待推荐数据更新后再滚动
  setTimeout(() => {
    const recommendationsSection = document.querySelector('.recommendations-section')
    if (recommendationsSection) {
      recommendationsSection.scrollIntoView({ behavior: 'smooth' })
    } else {
      ElMessage.info('暂无推荐数据，请先进行商品交互')
    }
  }, 500)
}
```

## 修改文件
- `frontend/src/views/UserInteraction.vue`

## 预期效果
1. 用户进入页面时，如果有交互历史，会自动显示推荐商品
2. 点击推荐按钮时，即使没有搜索历史，也会尝试获取推荐商品
3. 提升用户体验，让推荐功能更加主动和智能

## 测试建议
1. 清除浏览器缓存，重新进入用户交互页面
2. 验证页面加载时是否自动显示推荐商品
3. 在没有搜索的情况下点击推荐按钮，验证是否能显示推荐商品
4. 进行商品交互后，验证推荐数据是否正确更新
