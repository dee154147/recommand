# ç³»ç»Ÿè¿˜åŸæŒ‡å—

## ğŸ“‹ è¿˜åŸå‰ææ¡ä»¶

### **å·²å¤‡ä»½ç»„ä»¶**
- âœ… **ä»£ç **: Gitä»“åº“å·²æäº¤æ¨é€åˆ°è¿œç¨‹ä»“åº“
- âœ… **æ•°æ®åº“**: PostgreSQLå¤‡ä»½æ–‡ä»¶ (596MB)

### **éœ€è¦é‡æ–°è·å–çš„ç»„ä»¶**
- ğŸ”„ **è¯å‘é‡æ¨¡å‹**: éœ€è¦é‡æ–°ä¸‹è½½æˆ–è·å–
- ğŸ”„ **åŸå§‹æ•°æ®**: éœ€è¦é‡æ–°å‡†å¤‡
- ğŸ”„ **ä¾èµ–åŒ…**: é€šè¿‡åŒ…ç®¡ç†å™¨é‡æ–°å®‰è£…

## ğŸš€ ç³»ç»Ÿè¿˜åŸæ­¥éª¤

### **1. è·å–ä»£ç **
```bash
# å…‹éš†ä»£ç ä»“åº“
git clone <repository-url>
cd recommand2

# åˆ‡æ¢åˆ°æœ€æ–°ç‰ˆæœ¬
git checkout main
git pull origin main
```

### **2. ç¯å¢ƒå‡†å¤‡**

#### **2.1 å®‰è£…Pythonä¾èµ–**
```bash
# å®‰è£…PythonåŒ…
pip install -r requirements.txt
```

#### **2.2 å®‰è£…Node.jsä¾èµ–**
```bash
# è¿›å…¥å‰ç«¯ç›®å½•
cd frontend

# å®‰è£…å‰ç«¯ä¾èµ–
npm install
```

#### **2.3 å®‰è£…PostgreSQLå’Œpgvector**
```bash
# macOS (ä½¿ç”¨Homebrew)
brew install postgresql
brew install pgvector

# å¯åŠ¨PostgreSQLæœåŠ¡
brew services start postgresql
```

### **3. æ•°æ®åº“è¿˜åŸ**

#### **3.1 åˆ›å»ºæ•°æ®åº“**
```bash
# åˆ›å»ºæ•°æ®åº“
createdb -h localhost -U $(whoami) recommendation_db
```

#### **3.2 è¿˜åŸæ•°æ®**

**æ–¹å¼A: ä½¿ç”¨è‡ªå®šä¹‰æ ¼å¼å¤‡ä»½ (æ¨è)**
```bash
# è¿˜åŸæ•°æ®åº“
pg_restore -h localhost -U $(whoami) -d recommendation_db \
  --verbose --clean --if-exists \
  backups/recommendation_db_backup_20250915_215036.dump
```

**æ–¹å¼B: ä½¿ç”¨SQLæ ¼å¼å¤‡ä»½**
```bash
# è¿˜åŸæ•°æ®åº“
psql -h localhost -U $(whoami) -d recommendation_db \
  -f backups/recommendation_db_backup_20250915_215124.sql
```

### **4. è·å–è¯å‘é‡æ¨¡å‹**

#### **4.1 ä¸‹è½½è…¾è®¯AI Labä¸­æ–‡è¯å‘é‡**
- **æ¨¡å‹æ–‡ä»¶**: `Tencent_AILab_ChineseEmbedding.bin`
- **å‘é‡æ–‡ä»¶**: `Tencent_AILab_ChineseEmbedding.bin.vectors.npy`
- **æ€»å¤§å°**: çº¦9.6GB
- **ä¸‹è½½åœ°å€**: éœ€è¦ä»è…¾è®¯AI Labå®˜ç½‘è·å–

#### **4.2 æ”¾ç½®æ¨¡å‹æ–‡ä»¶**
```bash
# åˆ›å»ºæ¨¡å‹ç›®å½•
mkdir -p model/

# å°†ä¸‹è½½çš„æ¨¡å‹æ–‡ä»¶æ”¾å…¥modelç›®å½•
# model/Tencent_AILab_ChineseEmbedding.bin
# model/Tencent_AILab_ChineseEmbedding.bin.vectors.npy
```

### **5. å‡†å¤‡åŸå§‹æ•°æ®**

#### **5.1 å•†å“æ•°æ®**
- **æ–‡ä»¶**: `data/product.txt`
- **æ ¼å¼**: å•†å“ä¿¡æ¯æ–‡æœ¬æ–‡ä»¶
- **å¤§å°**: çº¦10MB

#### **5.2 å•†å“åˆ†ç±»æ•°æ®**
- **æ–‡ä»¶**: `data/productType.json`
- **æ ¼å¼**: JSONæ ¼å¼çš„åˆ†ç±»ä¿¡æ¯
- **å¤§å°**: çº¦8KB

### **6. é…ç½®ç¯å¢ƒå˜é‡**

#### **6.1 å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿**
```bash
cp env.example .env
```

#### **6.2 ç¼–è¾‘ç¯å¢ƒå˜é‡**
```bash
# ç¼–è¾‘.envæ–‡ä»¶ï¼Œé…ç½®æ•°æ®åº“è¿æ¥ç­‰
vim .env
```

**å…³é”®é…ç½®é¡¹**:
```env
# æ•°æ®åº“é…ç½®
DATABASE_URL=postgresql://$(whoami)@localhost:5432/recommendation_db

# æ¨¡å‹è·¯å¾„
VECTOR_MODEL_PATH=../model/Tencent_AILab_ChineseEmbedding.bin

# æ•°æ®è·¯å¾„
PRODUCT_DATA_PATH=../data/product.txt
PRODUCT_TYPE_PATH=../data/productType.json
```

### **7. å¯åŠ¨ç³»ç»Ÿ**

#### **7.1 å¯åŠ¨åç«¯æœåŠ¡**
```bash
# è¿›å…¥åç«¯ç›®å½•
cd backend

# å¯åŠ¨Flaskåº”ç”¨
python run.py
```

#### **7.2 å¯åŠ¨å‰ç«¯æœåŠ¡**
```bash
# æ–°å¼€ç»ˆç«¯ï¼Œè¿›å…¥å‰ç«¯ç›®å½•
cd frontend

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

### **8. éªŒè¯ç³»ç»Ÿ**

#### **8.1 æ£€æŸ¥æœåŠ¡çŠ¶æ€**
```bash
# æ£€æŸ¥åç«¯æœåŠ¡ (ç«¯å£5002)
curl http://localhost:5002/api/v1/health

# æ£€æŸ¥å‰ç«¯æœåŠ¡ (ç«¯å£3000)
curl http://localhost:3000
```

#### **8.2 æµ‹è¯•æ ¸å¿ƒåŠŸèƒ½**
```bash
# æµ‹è¯•å•†å“æœç´¢
curl "http://localhost:5002/api/v1/search/products?q=æ‰‹æœº&limit=5"

# æµ‹è¯•ç›¸ä¼¼å•†å“æŸ¥è¯¢
curl "http://localhost:5002/api/v1/similar-products/1?limit=5"
```

## ğŸ“Š è¿˜åŸåæ•°æ®éªŒè¯

### **æ•°æ®åº“éªŒè¯**
```sql
-- è¿æ¥æ•°æ®åº“
psql -h localhost -U $(whoami) -d recommendation_db

-- æ£€æŸ¥è¡¨æ•°é‡
\dt

-- æ£€æŸ¥å•†å“æ•°é‡
SELECT COUNT(*) FROM products;

-- æ£€æŸ¥å‘é‡æ•°æ®
SELECT COUNT(*) FROM products WHERE product_vector IS NOT NULL;
```

### **æ¨¡å‹éªŒè¯**
```python
# æµ‹è¯•è¯å‘é‡æ¨¡å‹åŠ è½½
python -c "
from app.services.recommendation_service import RecommendationService
service = RecommendationService()
print('æ¨¡å‹åŠ è½½æˆåŠŸ' if service.word_vectors else 'æ¨¡å‹åŠ è½½å¤±è´¥')
"
```

## ğŸ”§ å¸¸è§é—®é¢˜è§£å†³

### **é—®é¢˜1: æ•°æ®åº“è¿æ¥å¤±è´¥**
```bash
# æ£€æŸ¥PostgreSQLæœåŠ¡çŠ¶æ€
brew services list | grep postgresql

# é‡å¯PostgreSQLæœåŠ¡
brew services restart postgresql
```

### **é—®é¢˜2: æ¨¡å‹æ–‡ä»¶åŠ è½½å¤±è´¥**
- ç¡®è®¤æ¨¡å‹æ–‡ä»¶è·¯å¾„æ­£ç¡®
- æ£€æŸ¥æ–‡ä»¶æƒé™
- éªŒè¯æ¨¡å‹æ–‡ä»¶å®Œæ•´æ€§

### **é—®é¢˜3: å‰ç«¯ä¾èµ–å®‰è£…å¤±è´¥**
```bash
# æ¸…ç†ç¼“å­˜é‡æ–°å®‰è£…
rm -rf node_modules package-lock.json
npm install
```

### **é—®é¢˜4: ç«¯å£å ç”¨**
```bash
# æ£€æŸ¥ç«¯å£å ç”¨
lsof -i :5002  # åç«¯ç«¯å£
lsof -i :3000  # å‰ç«¯ç«¯å£

# ç»ˆæ­¢å ç”¨è¿›ç¨‹
kill -9 <PID>
```

## ğŸ“ è¿˜åŸæ£€æŸ¥æ¸…å•

- [ ] ä»£ç ä»“åº“å…‹éš†å®Œæˆ
- [ ] Pythonä¾èµ–å®‰è£…å®Œæˆ
- [ ] Node.jsä¾èµ–å®‰è£…å®Œæˆ
- [ ] PostgreSQLå’Œpgvectorå®‰è£…å®Œæˆ
- [ ] æ•°æ®åº“åˆ›å»ºå®Œæˆ
- [ ] æ•°æ®åº“è¿˜åŸå®Œæˆ
- [ ] è¯å‘é‡æ¨¡å‹ä¸‹è½½å®Œæˆ
- [ ] åŸå§‹æ•°æ®å‡†å¤‡å®Œæˆ
- [ ] ç¯å¢ƒå˜é‡é…ç½®å®Œæˆ
- [ ] åç«¯æœåŠ¡å¯åŠ¨æˆåŠŸ
- [ ] å‰ç«¯æœåŠ¡å¯åŠ¨æˆåŠŸ
- [ ] æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•é€šè¿‡

## ğŸ¯ è¿˜åŸå®Œæˆæ ‡å¿—

ç³»ç»Ÿè¿˜åŸæˆåŠŸçš„æ ‡å¿—ï¼š
- âœ… åç«¯APIå“åº”æ­£å¸¸
- âœ… å‰ç«¯é¡µé¢åŠ è½½æ­£å¸¸
- âœ… å•†å“æœç´¢åŠŸèƒ½æ­£å¸¸
- âœ… ç›¸ä¼¼å•†å“æŸ¥è¯¢æ­£å¸¸
- âœ… æ•°æ®åº“æŸ¥è¯¢æ­£å¸¸
- âœ… è¯å‘é‡æ¨¡å‹åŠ è½½æ­£å¸¸

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœåœ¨è¿˜åŸè¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. ç³»ç»Ÿæ—¥å¿—æ–‡ä»¶ (`backend.log`, `frontend.log`)
2. æ•°æ®åº“è¿æ¥é…ç½®
3. æ¨¡å‹æ–‡ä»¶è·¯å¾„å’Œæƒé™
4. ç½‘ç»œè¿æ¥çŠ¶æ€
5. ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µ
