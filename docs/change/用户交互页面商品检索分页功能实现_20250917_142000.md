# ç”¨æˆ·äº¤äº’é¡µé¢å•†å“æ£€ç´¢åˆ†é¡µåŠŸèƒ½å®ç°

## éœ€æ±‚æè¿°
å°†ç”¨æˆ·äº¤äº’é¡µé¢çš„å•†å“æ£€ç´¢åŒºåŸŸæ”¹ä¸ºåˆ†é¡µå±•ç¤ºï¼Œæå‡å¤§é‡å•†å“æ•°æ®çš„æµè§ˆä½“éªŒã€‚

## å®ç°æ–¹æ¡ˆ

### 1. åˆ†é¡µè®¾è®¡å‚æ•°
- **æ¯é¡µå•†å“æ•°é‡**: 12ä¸ªå•†å“ï¼ˆ3x4ç½‘æ ¼å¸ƒå±€ï¼‰
- **åˆ†é¡µæ§ä»¶**: é¦–é¡µã€ä¸Šä¸€é¡µã€é¡µç ã€ä¸‹ä¸€é¡µã€æœ«é¡µæŒ‰é’®
- **åˆ†é¡µä¿¡æ¯**: æ˜¾ç¤ºå½“å‰é¡µã€æ€»é¡µæ•°ã€æ€»å•†å“æ•°
- **æœç´¢çŠ¶æ€**: ä¿æŒæœç´¢å…³é”®è¯å’Œæœç´¢ç±»å‹

### 2. å‰ç«¯å®ç°

#### 2.1 æ•°æ®ç»“æ„æ‰©å±•
```javascript
// åˆ†é¡µç›¸å…³æ•°æ®
const currentPage = ref(1)
const pageSize = ref(12)
const totalPages = ref(0)
const totalProducts = ref(0)
const searchType = ref('semantic') // 'semantic' æˆ– 'fuzzy'
```

#### 2.2 æœç´¢é€»è¾‘æ›´æ–°
**è¯­ä¹‰æœç´¢**:
```javascript
const performSemanticSearch = async (page = 1) => {
  if (!searchQuery.value.trim()) {
    ElMessage.warning('è¯·è¾“å…¥æœç´¢å…³é”®è¯')
    return
  }
  
  loading.value = true
  searchType.value = 'semantic'
  currentPage.value = page
  
  try {
    // è°ƒç”¨è¯­ä¹‰æœç´¢APIï¼Œæ”¯æŒåˆ†é¡µ
    const response = await productAPI.semanticSearch(searchQuery.value, { 
      page: page,
      per_page: pageSize.value
    })
    
    const products = response.data?.products || []
    const pagination = response.data?.pagination || {}
    
    // æ¸…ç†å›¾ç‰‡URLï¼Œç§»é™¤æŸåçš„å­—ç¬¦
    currentProducts.value = products.map(product => ({
      ...product,
      image_url: cleanImageUrl(product.image_url)
    }))
    
    // æ›´æ–°åˆ†é¡µä¿¡æ¯
    totalPages.value = pagination.pages || 0
    totalProducts.value = pagination.total || 0
    
    if (currentProducts.value.length === 0) {
      ElMessage.info('æœªæ‰¾åˆ°ç›¸å…³å•†å“')
    } else {
      ElMessage.success(`æ‰¾åˆ° ${totalProducts.value} ä¸ªç›¸å…³å•†å“ï¼Œå½“å‰ç¬¬ ${page} é¡µ`)
    }
  } catch (error) {
    console.error('æœç´¢å¤±è´¥:', error)
    // ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®
    currentProducts.value = getMockSearchResults()
    totalPages.value = 1
    totalProducts.value = currentProducts.value.length
    ElMessage.success(`æ‰¾åˆ° ${currentProducts.value.length} ä¸ªç›¸å…³å•†å“`)
  } finally {
    loading.value = false
  }
}
```

**æ¨¡ç³Šæœç´¢**:
```javascript
const performFuzzySearch = async (page = 1) => {
  // ç±»ä¼¼è¯­ä¹‰æœç´¢çš„å®ç°ï¼Œæ”¯æŒåˆ†é¡µå‚æ•°
}
```

#### 2.3 åˆ†é¡µæ§åˆ¶æ–¹æ³•
```javascript
// åˆ†é¡µç›¸å…³æ–¹æ³•
const goToPage = (page) => {
  if (page < 1 || page > totalPages.value || page === currentPage.value) {
    return
  }
  
  if (searchType.value === 'semantic') {
    performSemanticSearch(page)
  } else {
    performFuzzySearch(page)
  }
}

const goToPreviousPage = () => {
  if (currentPage.value > 1) {
    goToPage(currentPage.value - 1)
  }
}

const goToNextPage = () => {
  if (currentPage.value < totalPages.value) {
    goToPage(currentPage.value + 1)
  }
}

const goToFirstPage = () => {
  goToPage(1)
}

const goToLastPage = () => {
  goToPage(totalPages.value)
}

// ç”Ÿæˆé¡µç æ•°ç»„
const getPageNumbers = () => {
  const pages = []
  const maxVisible = 5 // æœ€å¤šæ˜¾ç¤º5ä¸ªé¡µç 
  const start = Math.max(1, currentPage.value - Math.floor(maxVisible / 2))
  const end = Math.min(totalPages.value, start + maxVisible - 1)
  
  for (let i = start; i <= end; i++) {
    pages.push(i)
  }
  return pages
}
```

### 3. UIç»„ä»¶å®ç°

#### 3.1 æœç´¢ç»“æœä¿¡æ¯åŒºåŸŸ
```html
<!-- æœç´¢ç»“æœä¿¡æ¯ -->
<div class="search-results-info">
  <div class="results-summary">
    <span class="results-count">æ‰¾åˆ° {{ totalProducts }} ä¸ªå•†å“</span>
    <span class="results-page">ç¬¬ {{ currentPage }} é¡µï¼Œå…± {{ totalPages }} é¡µ</span>
  </div>
  <div class="search-type-indicator">
    <span class="search-type-badge" :class="searchType">
      {{ searchType === 'semantic' ? 'ğŸ” è¯­ä¹‰æ£€ç´¢' : 'ğŸ“ æ¨¡ç³ŠåŒ¹é…' }}
    </span>
  </div>
</div>
```

#### 3.2 åˆ†é¡µæ§ä»¶
```html
<!-- åˆ†é¡µæ§ä»¶ -->
<div class="pagination-container" v-if="totalPages > 1">
  <div class="pagination">
    <!-- é¦–é¡µæŒ‰é’® -->
    <button 
      class="pagination-btn pagination-first" 
      @click="goToFirstPage"
      :disabled="currentPage === 1"
      title="é¦–é¡µ"
    >
      â®
    </button>
    
    <!-- ä¸Šä¸€é¡µæŒ‰é’® -->
    <button 
      class="pagination-btn pagination-prev" 
      @click="goToPreviousPage"
      :disabled="currentPage === 1"
      title="ä¸Šä¸€é¡µ"
    >
      â—€
    </button>
    
    <!-- é¡µç æŒ‰é’® -->
    <button
      v-for="page in getPageNumbers()"
      :key="page"
      class="pagination-btn pagination-number"
      :class="{ active: page === currentPage }"
      @click="goToPage(page)"
    >
      {{ page }}
    </button>
    
    <!-- ä¸‹ä¸€é¡µæŒ‰é’® -->
    <button 
      class="pagination-btn pagination-next" 
      @click="goToNextPage"
      :disabled="currentPage === totalPages"
      title="ä¸‹ä¸€é¡µ"
    >
      â–¶
    </button>
    
    <!-- æœ«é¡µæŒ‰é’® -->
    <button 
      class="pagination-btn pagination-last" 
      @click="goToLastPage"
      :disabled="currentPage === totalPages"
      title="æœ«é¡µ"
    >
      â­
    </button>
  </div>
  
  <!-- åˆ†é¡µä¿¡æ¯ -->
  <div class="pagination-info">
    <span class="pagination-text">
      æ˜¾ç¤ºç¬¬ {{ (currentPage - 1) * pageSize + 1 }} - {{ Math.min(currentPage * pageSize, totalProducts) }} æ¡ï¼Œ
      å…± {{ totalProducts }} æ¡è®°å½•
    </span>
  </div>
</div>
```

### 4. CSSæ ·å¼å®ç°

#### 4.1 æœç´¢ç»“æœä¿¡æ¯æ ·å¼
```scss
.search-results-info {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 2rem;
  padding: 1rem 1.5rem;
  background: rgba(0, 255, 255, 0.05);
  border: 1px solid rgba(0, 255, 255, 0.2);
  border-radius: 12px;
}

.results-summary {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.results-count {
  font-size: 1.1rem;
  font-weight: 600;
  color: #00ffff;
}

.results-page {
  font-size: 0.9rem;
  color: rgba(255, 255, 255, 0.7);
}

.search-type-badge {
  padding: 0.5rem 1rem;
  border-radius: 20px;
  font-size: 0.9rem;
  font-weight: 600;
  transition: all 0.3s ease;
}

.search-type-badge.semantic {
  background: linear-gradient(45deg, #00ffff, #ff00ff);
  color: #ffffff;
}

.search-type-badge.fuzzy {
  background: linear-gradient(45deg, #ff6b6b, #ffa500);
  color: #ffffff;
}
```

#### 4.2 åˆ†é¡µæ§ä»¶æ ·å¼
```scss
.pagination-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1rem;
  margin-top: 2rem;
  padding: 2rem;
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid rgba(0, 255, 255, 0.1);
  border-radius: 15px;
}

.pagination {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  flex-wrap: wrap;
  justify-content: center;
}

.pagination-btn {
  padding: 0.8rem 1rem;
  border: none;
  border-radius: 8px;
  background: rgba(255, 255, 255, 0.1);
  color: #ffffff;
  font-size: 0.9rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  min-width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.pagination-btn:hover:not(:disabled) {
  background: rgba(0, 255, 255, 0.2);
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(0, 255, 255, 0.3);
}

.pagination-btn:disabled {
  opacity: 0.4;
  cursor: not-allowed;
  transform: none;
}

.pagination-number.active {
  background: linear-gradient(45deg, #00ffff, #ff00ff);
  color: #ffffff;
  box-shadow: 0 5px 15px rgba(0, 255, 255, 0.4);
}
```

#### 4.3 å“åº”å¼è®¾è®¡
```scss
@media (max-width: 768px) {
  .search-results-info {
    flex-direction: column;
    gap: 1rem;
    text-align: center;
  }

  .pagination {
    gap: 0.3rem;
  }

  .pagination-btn {
    padding: 0.6rem 0.8rem;
    font-size: 0.8rem;
    min-width: 35px;
    height: 35px;
  }
}
```

### 5. åŠŸèƒ½ç‰¹æ€§

#### 5.1 åˆ†é¡µæ§åˆ¶
- âœ… é¦–é¡µ/æœ«é¡µå¿«é€Ÿè·³è½¬
- âœ… ä¸Šä¸€é¡µ/ä¸‹ä¸€é¡µå¯¼èˆª
- âœ… é¡µç ç›´æ¥è·³è½¬
- âœ… æ™ºèƒ½é¡µç æ˜¾ç¤ºï¼ˆæœ€å¤šæ˜¾ç¤º5ä¸ªé¡µç ï¼‰
- âœ… æŒ‰é’®ç¦ç”¨çŠ¶æ€å¤„ç†

#### 5.2 æœç´¢çŠ¶æ€ä¿æŒ
- âœ… ä¿æŒæœç´¢å…³é”®è¯
- âœ… ä¿æŒæœç´¢ç±»å‹ï¼ˆè¯­ä¹‰/æ¨¡ç³Šï¼‰
- âœ… åˆ†é¡µçŠ¶æ€åŒæ­¥

#### 5.3 ç”¨æˆ·ä½“éªŒ
- âœ… åŠ è½½çŠ¶æ€æç¤º
- âœ… æœç´¢ç»“æœç»Ÿè®¡ä¿¡æ¯
- âœ… æœç´¢ç±»å‹æ ‡è¯†
- âœ… åˆ†é¡µä¿¡æ¯æ˜¾ç¤º
- âœ… å“åº”å¼è®¾è®¡

### 6. APIæ¥å£æ”¯æŒ

åç«¯APIå·²ç»æ”¯æŒåˆ†é¡µå‚æ•°ï¼š
- `page`: é¡µç ï¼ˆä»1å¼€å§‹ï¼‰
- `per_page`: æ¯é¡µæ•°é‡
- è¿”å›åˆ†é¡µä¿¡æ¯ï¼š`pages`, `total`, `has_next`, `has_prev`

**æµ‹è¯•ç»“æœ**:
```bash
# ç¬¬ä¸€é¡µ
curl "http://localhost:5003/api/v1/search/products?q=æ‰‹æœº&type=semantic&page=1&per_page=12"
# è¿”å›: pages: 2, total: 13, has_next: true

# ç¬¬äºŒé¡µ  
curl "http://localhost:5003/api/v1/search/products?q=æ‰‹æœº&type=semantic&page=2&per_page=12"
# è¿”å›: pages: 2, total: 13, has_next: false
```

### 7. æµ‹è¯•éªŒè¯

#### 7.1 åŠŸèƒ½æµ‹è¯•
- âœ… è¯­ä¹‰æœç´¢åˆ†é¡µæ­£å¸¸
- âœ… æ¨¡ç³Šæœç´¢åˆ†é¡µæ­£å¸¸
- âœ… åˆ†é¡µæ§ä»¶äº¤äº’æ­£å¸¸
- âœ… æœç´¢çŠ¶æ€ä¿æŒæ­£å¸¸
- âœ… å“åº”å¼å¸ƒå±€æ­£å¸¸

#### 7.2 æ€§èƒ½æµ‹è¯•
- âœ… æ¯é¡µ12ä¸ªå•†å“åŠ è½½å¿«é€Ÿ
- âœ… åˆ†é¡µåˆ‡æ¢æµç•…
- âœ… å¤§é‡æ•°æ®åˆ†é¡µç¨³å®š

### 8. ç›¸å…³æ–‡ä»¶

- `frontend/src/views/UserInteraction.vue` - ä¸»è¦å®ç°æ–‡ä»¶
- `frontend/src/utils/api.js` - APIæ¥å£è°ƒç”¨
- `backend/app/api/search_routes.py` - åç«¯æœç´¢API

### 9. åç»­ä¼˜åŒ–å»ºè®®

1. **ç¼“å­˜ä¼˜åŒ–**: ç¼“å­˜å·²åŠ è½½çš„é¡µé¢æ•°æ®
2. **é¢„åŠ è½½**: é¢„åŠ è½½ä¸‹ä¸€é¡µæ•°æ®
3. **æ— é™æ»šåŠ¨**: è€ƒè™‘å®ç°æ— é™æ»šåŠ¨æ¨¡å¼
4. **æœç´¢å†å²**: ä¿å­˜ç”¨æˆ·æœç´¢å†å²
5. **é«˜çº§ç­›é€‰**: æ·»åŠ ä»·æ ¼ã€åˆ†ç±»ç­‰ç­›é€‰æ¡ä»¶

## æ€»ç»“

æˆåŠŸå®ç°äº†ç”¨æˆ·äº¤äº’é¡µé¢çš„å•†å“æ£€ç´¢åˆ†é¡µåŠŸèƒ½ï¼Œä¸»è¦ç‰¹ç‚¹ï¼š

1. **å®Œæ•´çš„åˆ†é¡µæ§ä»¶**: é¦–é¡µã€ä¸Šä¸€é¡µã€é¡µç ã€ä¸‹ä¸€é¡µã€æœ«é¡µ
2. **æ™ºèƒ½é¡µç æ˜¾ç¤º**: æœ€å¤šæ˜¾ç¤º5ä¸ªé¡µç ï¼Œè‡ªåŠ¨è°ƒæ•´æ˜¾ç¤ºèŒƒå›´
3. **æœç´¢çŠ¶æ€ä¿æŒ**: ä¿æŒæœç´¢å…³é”®è¯å’Œç±»å‹
4. **ç”¨æˆ·ä½“éªŒä¼˜åŒ–**: åŠ è½½çŠ¶æ€ã€ç»Ÿè®¡ä¿¡æ¯ã€å“åº”å¼è®¾è®¡
5. **APIå…¼å®¹**: å®Œå…¨å…¼å®¹ç°æœ‰åç«¯API

åˆ†é¡µåŠŸèƒ½å¤§å¤§æå‡äº†å¤§é‡å•†å“æ•°æ®çš„æµè§ˆä½“éªŒï¼Œç”¨æˆ·å¯ä»¥æ›´é«˜æ•ˆåœ°æµè§ˆå’Œé€‰æ‹©å•†å“ã€‚
