# 智能推荐系统启动说明

## 📋 概述

本文档介绍如何使用一键启动脚本快速启动智能推荐系统的所有组件，包括前端、后端、数据库等服务。

## 🚀 快速启动

### 基本启动（前台模式）
```bash
./start_system.sh
```
- 在前台启动所有服务
- 显示实时日志
- 按 `Ctrl+C` 停止所有服务

### 后台启动模式
```bash
./start_system.sh --daemon
```
- 在后台启动所有服务
- 生成日志文件
- 保存进程ID
- 适合生产环境使用

## 🛑 停止服务

### 停止所有服务
```bash
./stop_system.sh
```
- 停止所有运行中的服务
- 清理端口占用
- 删除进程ID文件

## 📁 文件说明

### 启动脚本
- `start_system.sh` - 一键启动脚本
- `stop_system.sh` - 一键停止脚本

### 日志文件（后台模式）
- `logs/backend.log` - 后端服务日志
- `logs/frontend.log` - 前端服务日志
- `logs/backend.pid` - 后端进程ID
- `logs/frontend.pid` - 前端进程ID

## 🔧 系统组件

### 启动的服务
1. **PostgreSQL** - 数据库服务 (端口: 5432)
2. **Redis** - 缓存服务 (端口: 6379)
3. **Flask后端** - API服务 (端口: 5004)
4. **Vue.js前端** - 前端界面 (端口: 3001)

### 访问地址
- **前端界面**: http://localhost:3001
- **后端API**: http://localhost:5004
- **健康检查**: http://localhost:5004/health

## 📋 启动流程

### 自动检查项目
1. ✅ 检查项目目录是否存在
2. ✅ 检查PostgreSQL服务状态
3. ✅ 检查Redis服务状态
4. ✅ 检查Python依赖
5. ✅ 检查Node.js依赖

### 自动启动服务
1. 🔧 停止现有服务进程
2. 🐍 启动Flask后端服务
3. 🎨 启动Vue.js前端服务
4. ✅ 验证服务启动状态

## 🎯 使用场景

### 开发环境
```bash
# 前台启动，便于调试
./start_system.sh
```

### 生产环境
```bash
# 后台启动，稳定运行
./start_system.sh --daemon
```

### 快速重启
```bash
# 停止服务
./stop_system.sh

# 重新启动
./start_system.sh --daemon
```

## ⚠️ 注意事项

### 系统要求
- macOS系统
- Homebrew包管理器
- Python 3.x
- Node.js 16+
- PostgreSQL 14+
- Redis 6+

### 端口占用
- 确保端口3001、5004、5432、6379未被占用
- 脚本会自动清理端口冲突

### 权限要求
- 脚本需要执行权限：`chmod +x start_system.sh`
- 需要数据库连接权限

## 🔍 故障排除

### 常见问题

#### 1. 权限错误
```bash
chmod +x start_system.sh stop_system.sh
```

#### 2. 端口被占用
```bash
# 查看端口占用
lsof -i :3001
lsof -i :5004

# 强制清理
./stop_system.sh
```

#### 3. 依赖服务未启动
```bash
# 手动启动PostgreSQL
brew services start postgresql@14

# 手动启动Redis
brew services start redis
```

#### 4. 依赖包缺失
```bash
# 安装Python依赖
pip3 install -r backend/requirements.txt

# 安装Node.js依赖
cd frontend && npm install
```

### 日志查看
```bash
# 查看后端日志
tail -f logs/backend.log

# 查看前端日志
tail -f logs/frontend.log
```

## 📊 服务状态检查

### 检查服务是否运行
```bash
# 检查后端
curl http://localhost:5004/health

# 检查前端
curl http://localhost:3001
```

### 检查进程
```bash
# 查看Python进程
ps aux | grep "python.*run.py"

# 查看Node.js进程
ps aux | grep "npm.*dev"
```

## 🎉 成功启动标志

当看到以下信息时，表示系统启动成功：

```
🎉 系统启动成功！
================================
🌐 前端地址: http://localhost:3001
🔧 后端地址: http://localhost:5004
📊 健康检查: http://localhost:5004/health
================================
```

## 📞 技术支持

如遇到问题，请检查：
1. 系统依赖是否完整安装
2. 端口是否被其他程序占用
3. 数据库连接是否正常
4. 查看日志文件获取详细错误信息

---

**最后更新**: 2025年1月22日
**版本**: 1.0.0
