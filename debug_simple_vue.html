<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç®€å•Vueå¼¹çª—æµ‹è¯•</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <style>
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
        }
        
        .modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background: #1a1a1a;
            border: 1px solid #00ffff;
            border-radius: 10px;
            padding: 20px;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .metric-info-icon {
            display: inline-block;
            width: 20px;
            height: 20px;
            background: #00ffff;
            color: #000;
            border-radius: 50%;
            text-align: center;
            line-height: 20px;
            cursor: pointer;
            margin-left: 10px;
        }
        
        .metric-info-icon:hover {
            background: #00cccc;
        }
    </style>
</head>
<body>
    <div id="app">
        <div>
            <h3>æµ‹è¯•æŒ‡æ ‡</h3>
            <div>
                <span>å—æ¬¢è¿ç¨‹åº¦è¯„åˆ†</span>
                <span class="metric-info-icon" @click="showMetricInfo('popularity')">?</span>
                <span>8.5/10</span>
            </div>
        </div>

        <!-- å¼¹çª— -->
        <div class="modal" :class="{ show: showModal }">
            <div class="modal-content">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h3>{{ modalTitle }}</h3>
                    <button @click="closeModal" style="background: none; border: none; color: #00ffff; font-size: 24px; cursor: pointer;">&times;</button>
                </div>
                <div v-html="modalBody"></div>
            </div>
        </div>
    </div>

    <script>
        const { createApp, ref } = Vue;
        
        createApp({
            setup() {
                const showModal = ref(false);
                const modalTitle = ref('');
                const modalBody = ref('');
                
                const showMetricInfo = (metricType) => {
                    console.log('showMetricInfo called with:', metricType);
                    
                    if (metricType === 'popularity') {
                        modalTitle.value = 'å—æ¬¢è¿ç¨‹åº¦è¯„åˆ†';
                        modalBody.value = `
                            <h4>ğŸ“Š æŒ‡æ ‡è¯´æ˜</h4>
                            <p>åŸºäºç”¨æˆ·äº¤äº’è¡Œä¸ºè®¡ç®—çš„å•†å“å—æ¬¢è¿ç¨‹åº¦è¯„åˆ†</p>
                            <h4>ğŸ§® è®¡ç®—å…¬å¼</h4>
                            <div style="background: #333; padding: 10px; border-radius: 5px; margin: 10px 0;">
                                å—æ¬¢è¿ç¨‹åº¦ = (ç‚¹å‡»æ¬¡æ•° Ã— 0.3 + æŸ¥çœ‹æ¬¡æ•° Ã— 0.4 + æ”¶è—æ¬¡æ•° Ã— 0.5 + è´­ä¹°æ¬¡æ•° Ã— 1.0) / æ€»ç”¨æˆ·æ•° Ã— 10
                            </div>
                        `;
                    }
                    
                    showModal.value = true;
                    console.log('Modal should be visible now, showModal:', showModal.value);
                };
                
                const closeModal = () => {
                    console.log('closeModal called');
                    showModal.value = false;
                };
                
                return {
                    showModal,
                    modalTitle,
                    modalBody,
                    showMetricInfo,
                    closeModal
                };
            }
        }).mount('#app');
    </script>
</body>
</html>
